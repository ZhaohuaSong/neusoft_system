{% extends "mainbase.html" %}
{% load staticfiles %}
{% load crispy_forms_tags %}
<html lang="en">
<!-- styles -->
{% block styles %}
    <link href="{% static 'css/datepicker.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/bootstrap-editable.min.css' %}" rel="stylesheet">
    <link href="{% static 'css/chosen.min.css' %}" rel="stylesheet">
{% endblock %}
<!-- scripts -->
{% block scripts %}
    <script src="{% static "js/fuelux.wizard.min.js" %}"></script>
    <script src="{% static "js/jquery.validate.min.js" %}"></script>
    <script src="{% static "js/additional-methods.min.js" %}"></script>
    <script src="{% static "js/select2.min.js" %}"></script>
    <script src="{% static "js/chosen.jquery.min.js" %}"></script>
    <script src="{% static "js/bootstrap-datepicker.min.js" %}"></script>
    <style>
        .errorlist {
            margin: 5px 0px 0px 0px;
        }

        .errorlist li {
            list-style: none;
        }
    </style>
{% endblock %}
<body class="no-skin">
{% block content %}
    <div class="main-content">
        <div class="breadcrumbs" id="breadcrumbs">
            <script type="text/javascript">
                try {
                    ace.settings.check('breadcrumbs', 'fixed')
                } catch (e) {
                }
                jQuery(function ($) {
                    $("#btn-back").bind("click",
                            function () {
                                window.location.href = "{% url 'source_catalog:org.list' %}"
                            });
                })
            </script>
            <script type="text/javascript">
                var DETAIL_LIST_URL = '{% url "source_catalog:org.field.data" %}?resource_id={{resource_id}}';
            </script>
            <script src="{% static "js/source_catalog/org.field.list.js" %}"></script>
            <script src="{% static "js/source_catalog/org.field.edit.js" %}"></script>
            <script src="{% static "js/source_catalog/org.add.js" %}"></script>

            <!-- inline scripts related to this page -->
            <script type="text/javascript">
                var column_array_list = {{ category_name|safe }}
                var power_list = {{ power|safe }}
                var update_list = {{ update|safe }}
                var search_list ={{ search|safe }}
                var result_list ={{ result|safe }}
                var modify_list ={{ modify|safe }}
                var add_list ={{ add|safe }}
                var delete_list = {{ delete|safe }}
                jQuery(function ($) {

                    $('#id-disable-check').on('click', function () {
                        var inp = $('#form-input-readonly').get(0);
                        if (inp.hasAttribute('disabled')) {
                            inp.setAttribute('readonly', 'true');
                            inp.removeAttribute('disabled');
                            inp.value = "This text field is readonly!";
                        }
                        else {
                            inp.setAttribute('disabled', 'disabled');
                            inp.removeAttribute('readonly');
                            inp.value = "This text field is disabled!";
                        }
                    });

                    if (!ace.vars['touch']) {
                        $('.chosen-select').chosen({allow_single_deselect: true});
                        //resize the chosen on window resize

                        $(window)
                                .off('resize.chosen')
                                .on('resize.chosen', function () {
                                    $('.chosen-select').each(function () {
                                        var $this = $(this);
                                        $this.next().css({'width': "100%"});
                                    })
                                }).trigger('resize.chosen');
                        //resize chosen on sidebar collapse/expand
                        $(document).on('settings.ace.chosen', function (e, event_name, event_val) {
                            if (event_name != 'sidebar_collapsed') return;
                            $('.chosen-select').each(function () {
                                var $this = $(this);
                                $this.next().css({'width': "100%"});
                            })
                        });


                        $('#chosen-multiple-style .btn').on('click', function (e) {
                            var target = $(this).find('input[type=radio]');
                            var which = parseInt(target.val());
                            if (which == 2) $('#form-field-select-4').addClass('tag-input-style');
                            else $('#form-field-select-4').removeClass('tag-input-style');
                        });
                    }

                    $('[data-rel=tooltip]').tooltip();

                    $(".select2").css('width', '500px').select2({allowClear: true})
                            .on('change', function () {
                                $(this).closest('form').validate().element($(this));
                            });


                    var $validation = false;
                    $('#fuelux-wizard-container')
                            .ace_wizard({
                                //step: 2 //optional argument. wizard will jump to step "2" at first
                                //buttons: '.wizard-actions:eq(0)'
                            })
                            .on('actionclicked.fu.wizard', function (e, info) {
                                if (info.step == 1 && $validation) {
                                    if (!$('#validation-form').valid()) e.preventDefault();
                                }
                            })
                            .on('finished.fu.wizard', function (e) {
                                $('#listting-form').submit();
                            }).on('stepclick.fu.wizard', function (e) {

                        //e.preventDefault();//this will prevent clicking and selecting steps
                    });


                    //jump to a step
                    /**
                     var wizard = $('#fuelux-wizard-container').data('fu.wizard')
                     wizard.currentStep = 3;
                     wizard.setState();
                     */

                        //determine selected step
                        //wizard.selectedItem().step


                        //hide or show the other form which requires validation
                        //this is for demo only, you usullay want just one form in your application


                    $('#modal-wizard-container').ace_wizard();
                    $('#modal-wizard .wizard-actions .btn[data-dismiss=modal]').removeAttr('disabled');


                    $('[data-toggle="buttons"] .btn').on('click', function (e) {
                        var target = $(this).find('input[type=radio]');
                        var which = parseInt(target.val());
                        $('.user-profile').parent().addClass('hide');
                        $('#user-profile-' + which).parent().removeClass('hide');
                    });


                    $('.date-picker').datepicker({
                                autoclose: true,
                                todayHighlight: true
                            })
                            //show datepicker when clicking on the icon
                            .next().on(ace.click_event, function () {
                        $(this).prev().focus();
                    });

                    //or change it into a date range picker
                    $('.input-daterange').datepicker({autoclose: true});


                    //to translate the daterange picker, please copy the "examples/daterange-fr.js" contents here before initialization


                    $('#timepicker1').timepicker({
                        minuteStep: 1,
                        showSeconds: true,
                        showMeridian: false
                    }).next().on(ace.click_event, function () {
                        $(this).prev().focus();
                    });

                    $('#date-timepicker1').datetimepicker().next().on(ace.click_event, function () {
                        $(this).prev().focus();
                    });


                })
                if (!ace.vars['touch']) {
                    $('.chosen-select').chosen({allow_single_deselect: true});
                    //resize the chosen on window resize

                    $(window)
                            .off('resize.chosen')
                            .on('resize.chosen', function () {
                                $('.chosen-select').each(function () {
                                    var $this = $(this);
                                    $this.next().css({'width': "100%"});
                                })
                            }).trigger('resize.chosen');
                    //resize chosen on sidebar collapse/expand
                    $(document).on('settings.ace.chosen', function (e, event_name, event_val) {
                        if (event_name != 'sidebar_collapsed') return;
                        $('.chosen-select').each(function () {
                            var $this = $(this);
                            $this.next().css({'width': "100%"});
                        })
                    });
                }
            </script>

            <ul class="breadcrumb">
                <li>
                    <i class="ace-icon fa fa-home home-icon"></i>
                    <a href="#">首页</a>
                </li>
                <li>
                    <i class="ace-icon"></i>
                    <a href="#">中控节点</a>
                </li>
                <li>
                    <i class="ace-icon"></i>
                    <a href="#">资源目录注册列表</a>
                </li>
                <li class="active">资源目录注册</li>
            </ul><!-- /.breadcrumb -->
        </div>
        <div class="page-content" style="margin-bottom:100px;">
            <!-- /.ace-settings-container -->

            <div class="page-header">
                <h1>
                    注册资源目录
                </h1>
            </div><!-- /.page-header -->
            <form class="form-horizontal" id="listting-form" method="post">
                <div class="row">
                    <div class="col-xs-8 no-padding col-xs-push-2"
                         style=" margin-top:20px; border:1px solid #dedede; box-shadow:0px 0px 3px 0px #ccc; background:#f5f5f5;">

                        {% csrf_token %}
                        <div class="col-xs-12" style="margin-top:20px;">
                            <!-- PAGE CONTENT BEGINS -->


                            <div id="fuelux-wizard-container">
                                <hr>

                                <div class="step-content pos-rel col-sm-12">
                                    <div class="form-group col-sm-12">
                                        <h4 class="lighter block blue col-sm-12">表格/文件信息</h4>

                                        <div class="col-xs-12 no-padding">
                                            <div class="form-group col-sm-6">
                                                <label class="control-label col-sm-4 no-padding-right"> {{ form.resource_id.label }}</label>

                                                <div class="col-sm-8">
                                                    {{ form.resource_id }}
                                                    <div class="form-group has-error">
                                                        <div class="help-block col-xs-12 col-sm-reset inline">{{ form.resource_id.errors }} </div>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-sm-6">
                                                <label class="control-label col-sm-4 no-padding-right"> {{ form.resource_name.label }}</label>

                                                <div class="col-sm-8">
                                                    {{ form.resource_name }}
                                                    <div class="form-group has-error">
                                                        <div class="help-block col-xs-12 col-sm-reset inline">{{ form.resource_name.errors }} </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-12 no-padding">
                                            <div class="form-group col-sm-6">
                                                <label class="control-label col-sm-4 no-padding-right"> {{ form.category_name.label }}</label>

                                                <div class="col-sm-8">
                                                    <div class="input-group" style="display:block;">
                                                        <select class="select3  form-control" id="id_category_name"
                                                                data-placeholder="数据领域" name="category_name">
                                                            <option value="">----------</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-sm-6">
                                                <label class="control-label col-sm-4 no-padding-right"> {{ form.power.label }}</label>

                                                <div class="col-sm-8">
                                                    <div class="input-group" style="display:block;">
                                                        <select class="select3  form-control" id="id_power"
                                                                data-placeholder=" 权限控制" name="power">
                                                            <option value="">----------</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>

                                        <div class="col-xs-12 no-padding">
                                            <div class="form-group col-sm-6">
                                                <label class="control-label col-sm-4 no-padding-right"> {{ form.update.label }}</label>

                                                <div class="col-sm-8">
                                                    <div class="input-group" style="display:block;">
                                                        <select class="select3  form-control" id="id_update"
                                                                data-placeholder=" 更新频率" name="update">
                                                            <option value="">----------</option>
                                                        </select>
                                                    </div>
                                                </div>
                                            </div>

                                            <div class="form-group col-sm-6">
                                                <label class="control-label col-sm-4 no-padding-right">{{ form.resource_type.label }}</label>

                                                <div class="col-sm-8">
                                                    {{ form.resource_type }}
                                                    <div class="form-group has-error">
                                                        <div class="help-block col-xs-12 col-sm-reset inline">{{ form.resource_type.errors }} </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <hr>
                            </div>


                            <div class="space-10"></div>
                            {% include "form_buttons.html" %}<!-- /.form_buttons -->
                            <div class="space-10"></div>
                        </div>

                        <!-- PAGE CONTENT ENDS -->
                    </div><!-- /.col -->
                </div><!-- /.row -->
            </form>
            {% include "source_catalog/org.detail.list.html" %}
        </div>
    </div>
{% endblock %}
<!-- /.main-content -->
</body>
</html>
