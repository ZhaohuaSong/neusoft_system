#!/usr/bin/env python
# -*- coding: UTF-8 -*-

from __future__ import unicode_literals

from django.db import models

#########################报文管理数据库模型#########################
# Create your models here.
class Apps(models.Model):
    """
    应用程序管理
    """
    ACTIVE_CHOICE = (
        (1, u'正常使用'),
        (0, u'已停用'),
    )


    app_id   = models.CharField(max_length=64)
    app_name = models.CharField(max_length=255)
    app_ip   = models.CharField(max_length=255)
    app_port = models.IntegerField()
    app_state   = models.IntegerField(choices=ACTIVE_CHOICE)  #
    app_triggertype = models.IntegerField()  #
    create_by = models.CharField(max_length=255)
    create_date = models.DateTimeField(blank=True, null=True)
    update_date = models.DateTimeField(blank=True, null=True)
    remarks = models.CharField(max_length=255)

    class Meta:
        managed = False
        db_table = 'packmanage_apps'


class TriggerType(models.Model):
    """
    报文发送触发事件类型
    """
    trigger_id   = models.IntegerField()
    trigger_name = models.CharField(max_length=255)
    remarks = models.CharField(max_length=255)

    class Meta:
        managed = False
        db_table = 'packmanage_triggertype'

#########################协议管理数据库模型#########################

class ProtocolType(models.Model):
    """
    应用程序管理
    """
    SCR_CHOICE = (
        (1, u'CSV文件'),
        (0, u'数据库表'),
    )

    ACTIVE_CHOICE = (
        (1, u'正常使用'),
        (0, u'已停用'),
    )

    PACK_TYPE = (
        ('00', u'请求'),
        ('01', u'响应'),
    )


    protocol_id   = models.CharField(max_length=64)
    protocol_name = models.CharField(max_length=255)
    protocol_state= models.IntegerField(choices=ACTIVE_CHOICE)  #
    protocol_srctype = models.IntegerField(choices=SCR_CHOICE)  #
    protocol_msgtype = models.CharField(choices=PACK_TYPE, max_length=64)  #
    protocol_content = models.TextField()
    create_by = models.CharField(max_length=255)
    create_date = models.DateTimeField(blank=True, null=True)
    update_date = models.DateTimeField(blank=True, null=True)
    remarks = models.CharField(max_length=255)

    class Meta:
        managed = False
        db_table = 'packmanage_protocoltype'

class SendMsg(models.Model):
    """
      ===============================================================================
      function：    发送报文信息
      developer:    zzm
      add-time      2016/01/04
      Note:
      ===============================================================================
    """

    msg_no = models.CharField(max_length=64, verbose_name='报文编号', blank=True, null=True)
    status = models.CharField(max_length=8, verbose_name='0-未发送,1-已发送', blank=True, null=True)
    content = models.CharField(max_length=500, verbose_name='信息内容', blank=True, null=True)
    create_time = models.DateTimeField(null=True, blank=True) #创建时间
    return_time = models.DateTimeField(null=True, blank=True) #创建时间
    code = models.CharField(max_length=16, verbose_name='00-响应成功,-1-未响应', blank=True, null=True)
    result = models.CharField(max_length=500, verbose_name='响应结果', blank=True, null=True)
    ip_address = models.CharField(max_length=32, verbose_name='发送ip', blank=True, null=True)
    ip_port = models.CharField(max_length=16, verbose_name='发送ip端口', blank=True, null=True)
    server_address = models.CharField(max_length=32, verbose_name='目标ip', blank=True, null=True)
    server_port = models.CharField(max_length=16, verbose_name='目标端口', blank=True, null=True)

    class Meta:
        managed = False
        db_table = 'send_msg'
